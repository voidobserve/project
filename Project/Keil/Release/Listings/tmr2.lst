C51 COMPILER V9.60.7.0   TMR2                                                              08/09/2024 15:55:04 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE TMR2
OBJECT MODULE PLACED IN .\Release\Objects\tmr2.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\..\Hardware\tmr2.c LARGE OPTIMIZE(8,SIZE) BROWSE INTVECTOR(0X000C) IN
                    -CDIR(..\..\Libraries\Include;..\..\User;..\..\User\lib;..\..\Hardware;..\..\Lowpower;..\..\App) INTERVAL(3) DEBUG OBJECT
                    -EXTEND PRINT(.\Release\Listings\tmr2.lst) OBJECT(.\Release\Objects\tmr2.obj)

line level    source

   1          // ¶¨Ê±Æ÷TMR2µÄÇý¶¯Ô´ÎÄ¼þ
   2          #include "tmr2.h"
   3          
   4          #define TMR2_CNT_TIME (SYSCLK / 32 / 10000 - 1) // ¼ÆÊýÖÜÆÚ 10KHz£¬100us²úÉúÒ»´ÎÖÐ¶Ï
   5          
   6          // volatile bit tmr2_flag = 0; // tmr2ÖÐ¶Ï·þÎñº¯ÊýÖÐ»áÖÃÎ»µÄ±êÖ¾Î»
   7          volatile u32 tmr2_cnt = 0; // ¶¨Ê±Æ÷TMR2µÄ¼ÆÊýÖµ£¨Ã¿´ÎÔÚÖÐ¶Ï·þÎñº¯ÊýÖÐ»á¼ÓÒ»£©
   8          
   9          /**
  10           * @brief ÅäÖÃ¶¨Ê±Æ÷TMR2
  11           */
  12          void tmr2_config(void)
  13          {
  14   1          TMR_ALLCON = TMR2_CNT_CLR(0x1);                           // Çå³ý¼ÆÊýÖµ
  15   1          TMR2_PRH = TMR_PERIOD_VAL_H((TMR2_CNT_TIME >> 8) & 0xFF); // ÖÜÆÚÖµ
  16   1          TMR2_PRL = TMR_PERIOD_VAL_L((TMR2_CNT_TIME >> 0) & 0xFF);
  17   1          TMR2_CONH = TMR_PRD_PND(0x1) | TMR_PRD_IRQ_EN(0x1);                               // Çå³ýTMR2µÄ¼ÆÊý±êÖ
             -¾Î»£¬±íÊ¾Î´Íê³É¼ÆÊý. Ê¹ÄÜTMR2µÄ¼ÆÊýÖÐ¶Ï
  18   1          TMR2_CONL = /* TMR_SOURCE_SEL(0x7) |*/ TMR_PRESCALE_SEL(0x5) | TMR_MODE_SEL(0x1); // Ñ¡ÔñÏµÍ³Ê±ÖÓ£¬32·
             -ÖÆµ£¬¼ÆÊýÄ£Ê½
  19   1          TMR2_CONL |= TMR_SOURCE_SEL(0x05);                                                // ÅäÖÃTMR2µÄÊ±ÖÓÔ´£
             -¬²»ÓÃÈÎºÎÊ±ÖÓ
  20   1          IE_EA = 1;                                                                        // ´ò¿ª×ÜÖÐ¶Ï
  21   1      }
  22          
  23          /**
  24           * @brief ¿ªÆô¶¨Ê±Æ÷TMR2£¬¿ªÊ¼¼ÆÊ±
  25           */
  26          void tmr2_enable(void)
  27          {
  28   1          // ÖØÐÂ¸øTMR2ÅäÖÃÊ±ÖÓ
  29   1          TMR2_CONL &= ~(TMR_SOURCE_SEL(0x07)); // Çå³ý¶¨Ê±Æ÷µÄÊ±ÖÓÔ´ÅäÖÃ¼Ä´æÆ÷
  30   1          TMR2_CONL |= TMR_SOURCE_SEL(0x06);    // ÅäÖÃ¶¨Ê±Æ÷µÄÊ±ÖÓÔ´£¬Ê¹ÓÃÏµÍ³Ê±ÖÓ£¨Ô¼21MHz£©
  31   1      
  32   1          __EnableIRQ(TMR2_IRQn); // Ê¹ÄÜÖÐ¶Ï
  33   1          IE_EA = 1;              // ´ò¿ª×ÜÖÐ¶Ï
  34   1      }
  35          
  36          /**
  37           * @brief ¹Ø±Õ¶¨Ê±Æ÷2£¬Çå¿Õ¼ÆÊýÖµ
  38           */
  39          void tmr2_disable(void)
  40          {
  41   1          // ²»¸ø¶¨Ê±Æ÷Ìá¹©Ê±ÖÓ£¬ÈÃËüÍ£Ö¹¼ÆÊý
  42   1          TMR2_CONL &= ~(TMR_SOURCE_SEL(0x07)); // Çå³ý¶¨Ê±Æ÷µÄÊ±ÖÓÔ´ÅäÖÃ¼Ä´æÆ÷
  43   1          TMR2_CONL |= TMR_SOURCE_SEL(0x05);    // ÅäÖÃ¶¨Ê±Æ÷µÄÊ±ÖÓÔ´£¬²»ÓÃÈÎºÎÊ±ÖÓ
  44   1      
  45   1          // Çå³ý¶¨Ê±Æ÷µÄ¼ÆÊýÖµ
  46   1          TMR2_CNTL = 0;
  47   1          TMR2_CNTH = 0;
  48   1      
  49   1          __DisableIRQ(TMR2_IRQn); // ¹Ø±ÕÖÐ¶Ï£¨²»Ê¹ÄÜÖÐ¶Ï£©
  50   1      
C51 COMPILER V9.60.7.0   TMR2                                                              08/09/2024 15:55:04 PAGE 2   

  51   1          tmr2_cnt = 0; // Çå³ý±äÁ¿µÄ¼ÆÊýÖµ
  52   1      }
  53          
  54          // TMR2ÖÐ¶Ï·þÎñº¯Êý
  55          void TIMR2_IRQHandler(void) interrupt TMR2_IRQn
  56          {
  57   1          static bit is_white_light_open = 0; // ±êÖ¾Î»£¬ÓÃÓÚ¿ØÖÆ°×µÆµÄ¿ªÆô£¬·ÀÖ¹¶à´Îµ÷ÓÃ¿ªÆôº¯Êý£¬Ôì³ÉÉÁË¸
  58   1      
  59   1          // ½øÈëÖÐ¶ÏÉèÖÃIP£¬²»¿ÉÉ¾³ý
  60   1          __IRQnIPnPush(TMR2_IRQn);
  61   1          // ---------------- ÓÃ»§º¯Êý´¦Àí -------------------
  62   1          if (TMR2_CONH & TMR_PRD_PND(0x1))
  63   1          {
  64   2              TMR2_CONH |= TMR_PRD_PND(0x1); // Çå³ýpending
  65   2              // P24 = ~P24; // ²âÊÔ¶¨Ê±Æ÷´¥·¢ÖÐ¶ÏµÄÖÜÆÚ
  66   2              tmr2_cnt++; //
  67   2      
  68   2              // ¸ù¾Ý¿ØÖÆµÆ¹âµÄ±êÖ¾Î»À´½øÐÐÏàÓ¦µÄ²Ù×÷
  69   2              switch (light_control_flag)
  70   2              {
  71   3      #if 0                          // ¿ªÆô/¹Ø±Õ»ÆµÆ
                          // case LIGHT_YELLOW_OPEN: // ¿ªÆô»ÆµÆ
                          //     yellow_light_open();
                          //     if (cur_pwm_duty < 700)
                          //     {
                          //         if (tmr2_cnt >= 10) // Ã¿¹ý1ms£¬¸øPWMÕ¼¿Õ±ÈÔö¼Ó0.1%
                          //         {
                          //             tmr2_cnt = 0;
                          //             tmr0_set_pwm_duty(++cur_pwm_duty);
                          //         }
                          //     }
                          //     else
                          //     {
                          //         // µ÷ÕûÍê³Éºó£¬Çå³ý±êÖ¾Î»
                          //         light_control_flag = LIGHT_CONTROL_NONE;
                          //     }
                          //     break;
                          // case LIGHT_YELLOW_CLOSE: // ¹Ø±Õ»ÆµÆ
                          //     if (cur_pwm_duty > 0)
                          //     {
                          //         if (tmr2_cnt >= 10) // Ã¿¹ý1ms£¬¸øPWMÕ¼¿Õ±È¼õÉÙ0.1%
                          //         {
                          //             tmr2_cnt = 0;
                          //             tmr0_set_pwm_duty(--cur_pwm_duty);
                          //         }
                          //     }
                          //     else
                          //     {
                          //         yellow_light_close(); //
                          //         // µ÷ÕûÍê³Éºó£¬Çå³ý±êÖ¾Î»
                          //         light_control_flag = LIGHT_CONTROL_NONE;
                          //     }
                          //     break;
              #endif                         // ¿ªÆô/¹Ø±Õ»ÆµÆ
 105   3              case LIGHT_WHITE_OPEN: // ´ò¿ª°×µÆ
 106   3                  
 107   3                  if (0 == is_white_light_open)
 108   3                  {
 109   4                      white_light_open();
 110   4                      is_white_light_open = 1;
 111   4                  }
 112   3                      
C51 COMPILER V9.60.7.0   TMR2                                                              08/09/2024 15:55:04 PAGE 3   

 113   3                  if (cur_pwm_duty < cur_white_duty)
 114   3                  {
 115   4                      // if (tmr2_cnt >= 10) // Ã¿¹ý1ms£¬¸øPWMÕ¼¿Õ±ÈÔö¼Ó0.1%
 116   4                      if (tmr2_cnt >= PWM_ADJUST_DUTY_TIME_STEP) 
 117   4                      {
 118   5                          tmr2_cnt = 0;
 119   5                          tmr1_set_pwm_duty(++cur_pwm_duty);
 120   5                      }
 121   4                  }
 122   3                  else
 123   3                  {
 124   4                      // µ÷ÕûÍê³Éºó£¬Çå³ý±êÖ¾Î»
 125   4                      light_control_flag = LIGHT_CONTROL_NONE;
 126   4                  }
 127   3                  break;
 128   3              case LIGHT_WHITE_CLOSE: // ¹Ø±Õ°×µÆ
 129   3                  if (cur_pwm_duty > 0)
 130   3                  {
 131   4                      // if (tmr2_cnt >= 10) // Ã¿¹ý1ms£¬¸øPWMÕ¼¿Õ±È¼õÉÙ0.1%
 132   4                      if (tmr2_cnt >= PWM_ADJUST_DUTY_TIME_STEP) 
 133   4                      {
 134   5                          tmr2_cnt = 0;
 135   5                          tmr1_set_pwm_duty(--cur_pwm_duty);
 136   5                      }
 137   4                  }
 138   3                  else
 139   3                  {
 140   4                      white_light_close(); //
 141   4                      
 142   4                      // µ÷ÕûÍê³Éºó£¬Çå³ý±êÖ¾Î»
 143   4                      light_control_flag = LIGHT_CONTROL_NONE;
 144   4                      is_white_light_open = 0;
 145   4                  }
 146   3                  break;
 147   3      
 148   3              default:          // Ä¬ÈÏÊ²Ã´Ò²²»×ö
 149   3                  tmr2_cnt = 0; // Çå¿Õ´æ·Å¶¨Ê±Æ÷¼ÆÊýÖµµÄ±äÁ¿
 150   3                  break;
 151   3              }
 152   2      
 153   2      #if 0  // [²»ÄÜÊµÏÖ¹¦ÄÜµÄ´úÂë]°ÑËùÓÐ¶Ì°´¡¢³¤°´µÄµÆ¹âµ÷½Ú¶¼·ÅÔÚ¶¨Ê±Æ÷£¬´úÂë»áÌØ±ð³¤£¬¶øÇÒ²»ºÃ´¦Àí
                      if (is_touch_key_light_hold && tmr2_cnt >= 15)
                      {
              #if 1  // ½øÐÐ³¤°´µÄµÆ¹âµ÷½Ú£¨³¤°´Ê±£¬Ã¿1.5msµ÷ÕûÒ»´Î£©
                          if (LIGHT_CTL_MODE_SINGLE == light_ctl_mode)
                          {
                              // Èç¹ûµ±Ç°ÊÇµ¥É«Ä£Ê½£¨Ö»¿ØÖÆ°×µÆ£©
                              if (light_adjust_add_sub_flag)
                              {
                                  // Èç¹ûµ±Ç°ÊÇÔÚÔö´óÁÁ¶È
                                  if (cur_pwm_duty < PWM_MAX_DUTY_SINGLE_LIGHT)
                                  {
                                      tmr1_set_pwm_duty(++cur_pwm_duty);
                                      white_light_open();
                                  }
                                  else
                                  {
                                      // Èç¹ûÒÑ¾­µ½ÁË×î´óÁÁ¶È
                                      // cur_pwm_duty = 700;
                                      tmr1_set_pwm_duty(cur_pwm_duty);
                                      white_light_open();
                                  }
C51 COMPILER V9.60.7.0   TMR2                                                              08/09/2024 15:55:04 PAGE 4   

              
                                  light_on_off_status = 1; // ¸üÐÂµÆ¹â×´Ì¬
                              }
                              else
                              {
                                  // Èç¹ûµ±Ç°ÊÇÔÚ¼õÐ¡ÁÁ¶È
                                  if (cur_pwm_duty > 0)
                                  {
                                      tmr1_set_pwm_duty(--cur_pwm_duty);
                                      white_light_open();
              
                                      light_on_off_status = 1; // ¸üÐÂµÆ¹â×´Ì¬
                                  }
                                  else
                                  {
                                      // Èç¹ûÒÑ¾­µ½ÁË×îÐ¡ÁÁ¶È
                                      tmr1_set_pwm_duty(cur_pwm_duty);
                                      white_light_close();
              
                                      light_on_off_status = 0; // ¸üÐÂµÆ¹â×´Ì¬
                                  }
                              }
                          }
                          else if (LIGHT_CTL_MODE_MUILTY == light_ctl_mode)
                          {
                              // Èç¹ûµ±Ç°ÊÇÈýÉ«ÇÐ»»Ä£Ê½
                              // ÅÐ¶Ïµ±Ç°ÊÇ²»ÊÇ»Æ°×É«£¬Èç¹ûÊÇ£¬ÐèÒª×¢Òâ×î´óµÄÕ¼¿Õ±ÈÎª60%£¬Èç¹û²»ÊÇ£¬×î´óµÄÕ¼¿Õ±ÈÎª70%
              
                              if (LIGHT_MUILTY_CUR_WHITE == light_muilty_cur_status)
                              {
                                  // Èç¹ûµ±Ç°ÊÇ°×µÆ
                                  if (light_adjust_add_sub_flag)
                                  {
                                      // Èç¹ûµ±Ç°ÊÇÔÚÔö´óÁÁ¶È
                                      if (cur_pwm_duty < PWM_MAX_DUTY_SINGLE_LIGHT)
                                      {
                                          tmr1_set_pwm_duty(++cur_pwm_duty);
                                          white_light_open();
                                      }
                                      else
                                      {
                                          // Èç¹ûÒÑ¾­µ½ÁË×î´óÁÁ¶È
                                          tmr1_set_pwm_duty(cur_pwm_duty);
                                          white_light_open();
                                      }
              
                                      light_on_off_status = 1; // ¸üÐÂµÆ¹â×´Ì¬
                                  }
                                  else
                                  {
                                      // Èç¹ûµ±Ç°ÊÇÔÚ¼õÐ¡ÁÁ¶È
                                      if (cur_pwm_duty > 0)
                                      {
                                          tmr1_set_pwm_duty(--cur_pwm_duty);
                                          white_light_open();
                                          light_on_off_status = 1; // ¸üÐÂµÆ¹â×´Ì¬
                                      }
                                      else
                                      {
                                          // Èç¹ûÒÑ¾­µ½ÁË×îÐ¡ÁÁ¶È
                                          tmr1_set_pwm_duty(cur_pwm_duty);
                                          white_light_close();
C51 COMPILER V9.60.7.0   TMR2                                                              08/09/2024 15:55:04 PAGE 5   

                                          light_on_off_status = 0; // ¸üÐÂµÆ¹â×´Ì¬
                                      }
                                  }
                              }
                              else if (LIGHT_MUILTY_CUR_YELLOW == light_muilty_cur_status)
                              {
                                  // Èç¹ûµ±Ç°ÊÇ»ÆµÆ
                                  if (light_adjust_add_sub_flag)
                                  {
                                      // Èç¹ûµ±Ç°ÊÇÔÚÔö´óÁÁ¶È
                                      if (cur_pwm_duty < PWM_MAX_DUTY_SINGLE_LIGHT)
                                      {
                                          tmr0_set_pwm_duty(++cur_pwm_duty);
                                          yellow_light_open();
                                      }
                                      else
                                      {
                                          // Èç¹ûÒÑ¾­µ½ÁË×î´óÁÁ¶È
                                          tmr0_set_pwm_duty(cur_pwm_duty);
                                          yellow_light_open();
                                      }
                                      light_on_off_status = 1; // ¸üÐÂµÆ¹â×´Ì¬
                                  }
                                  else
                                  {
                                      // Èç¹ûµ±Ç°ÊÇÔÚ¼õÐ¡ÁÁ¶È
                                      if (cur_pwm_duty > 0)
                                      {
                                          tmr0_set_pwm_duty(--cur_pwm_duty);
                                          yellow_light_open();
                                          light_on_off_status = 1; // ¸üÐÂµÆ¹â×´Ì¬
                                      }
                                      else
                                      {
                                          // Èç¹ûÒÑ¾­µ½ÁË×îÐ¡ÁÁ¶È
                                          // cur_pwm_duty = 0;
                                          tmr0_set_pwm_duty(cur_pwm_duty);
                                          yellow_light_close();
                                          light_on_off_status = 0; // ¸üÐÂµÆ¹â×´Ì¬
                                      }
                                  }
                              }
                              else if (LIGHT_MUILTY_CUR_YELLOW_WHITE == light_muilty_cur_status)
                              {
                                  // Èç¹ûµ±Ç°ÊÇ»Æ°×É«
                                  if (light_adjust_add_sub_flag)
                                  {
                                      // Èç¹ûµ±Ç°ÊÇÔÚÔö´óÁÁ¶È
                                      if (cur_pwm_duty < PWM_MAX_DUTY_MUILTY_LIGHT)
                                      {
                                          tmr0_set_pwm_duty(++cur_pwm_duty);
                                          tmr1_set_pwm_duty(cur_pwm_duty);
                                          yellow_light_open();
                                          white_light_open();
                                      }
                                      else
                                      {
                                          // Èç¹ûÒÑ¾­µ½ÁË×î´óÁÁ¶È
                                          tmr0_set_pwm_duty(cur_pwm_duty);
                                          tmr1_set_pwm_duty(cur_pwm_duty);
                                          yellow_light_open();
                                          white_light_open();
C51 COMPILER V9.60.7.0   TMR2                                                              08/09/2024 15:55:04 PAGE 6   

                                      }
                                      light_on_off_status = 1; // ¸üÐÂµÆ¹â×´Ì¬
                                  }
                                  else
                                  {
                                      // Èç¹ûµ±Ç°ÊÇÔÚ¼õÐ¡ÁÁ¶È
                                      if (cur_pwm_duty > 0)
                                      {
                                          tmr0_set_pwm_duty(--cur_pwm_duty);
                                          tmr1_set_pwm_duty(cur_pwm_duty);
                                          yellow_light_open();
                                          white_light_open();
                                          light_on_off_status = 1; // ¸üÐÂµÆ¹â×´Ì¬
                                      }
                                      else
                                      {
                                          // Èç¹ûÒÑ¾­µ½ÁË×îÐ¡ÁÁ¶È
                                          tmr0_set_pwm_duty(cur_pwm_duty);
                                          tmr1_set_pwm_duty(cur_pwm_duty);
                                          yellow_light_close();
                                          white_light_close();
                                          light_on_off_status = 0; // ¸üÐÂµÆ¹â×´Ì¬
                                      }
                                  }
                              }
                              else if (LIGHT_MUILTY_CUR_OFF == light_muilty_cur_status)
                              {
                                  // Èç¹ûµ±Ç°µÆÊÇ¹Ø±ÕµÄ£¬³¤°´ºóËÉ¿ªÊÖÊ±£¬°ÑµÆ´ò¿ª
                                  is_touch_key_light_press = 1;
                                  light_adjust_add_sub_flag = 1;
                              }
                          }
              #endif // ½øÐÐ³¤°´µÄµÆ¹âµ÷½Ú
                      }
                      else if (0 == is_touch_key_light_hold) // Èç¹û²»ÊÇ³¤°´
                      {
                          // ¸ù¾Ý¿ØÖÆµÆ¹âµÄ±êÖ¾Î»À´½øÐÐÏàÓ¦µÄ²Ù×÷
                          switch (light_control_flag)
                          {
              #if 0  // ¿ªÆô/¹Ø±Õ»ÆµÆ
                     // case LIGHT_YELLOW_OPEN: // ¿ªÆô»ÆµÆ
                     //     yellow_light_open();
                     //     if (cur_pwm_duty < 700)
                     //     {
                     //         if (tmr2_cnt >= 10) // Ã¿¹ý1ms£¬¸øPWMÕ¼¿Õ±ÈÔö¼Ó0.1%
                     //         {
                     //             tmr2_cnt = 0;
                     //             tmr0_set_pwm_duty(++cur_pwm_duty);
                     //         }
                     //     }
                     //     else
                     //     {
                     //         // µ÷ÕûÍê³Éºó£¬Çå³ý±êÖ¾Î»
                     //         light_control_flag = LIGHT_CONTROL_NONE;
                     //     }
                     //     break;
                     // case LIGHT_YELLOW_CLOSE: // ¹Ø±Õ»ÆµÆ
                     //     if (cur_pwm_duty > 0)
                     //     {
                     //         if (tmr2_cnt >= 10) // Ã¿¹ý1ms£¬¸øPWMÕ¼¿Õ±È¼õÉÙ0.1%
                     //         {
                     //             tmr2_cnt = 0;
C51 COMPILER V9.60.7.0   TMR2                                                              08/09/2024 15:55:04 PAGE 7   

                     //             tmr0_set_pwm_duty(--cur_pwm_duty);
                     //         }
                     //     }
                     //     else
                     //     {
                     //         yellow_light_close(); //
                     //         // µ÷ÕûÍê³Éºó£¬Çå³ý±êÖ¾Î»
                     //         light_control_flag = LIGHT_CONTROL_NONE;
                     //     }
                     //     break;
              #endif // ¿ªÆô/¹Ø±Õ»ÆµÆ
                          case LIGHT_WHITE_OPEN: // ´ò¿ª°×µÆ
                              white_light_open();
                              if (cur_pwm_duty < PWM_MAX_DUTY_SINGLE_LIGHT)
                              {
                                  if (tmr2_cnt >= 10) // Ã¿¹ý1ms£¬¸øPWMÕ¼¿Õ±ÈÔö¼Ó0.1%
                                  {
                                      tmr2_cnt = 0;
                                      tmr1_set_pwm_duty(++cur_pwm_duty);
                                  }
                              }
                              else
                              {
                                  // µ÷ÕûÍê³Éºó£¬Çå³ý±êÖ¾Î»
                                  light_control_flag = LIGHT_CONTROL_NONE;
                              }
                              break;
                          case LIGHT_WHITE_CLOSE: // ¹Ø±Õ°×µÆ
                              if (cur_pwm_duty > 0)
                              {
                                  if (tmr2_cnt >= 10) // Ã¿¹ý1ms£¬¸øPWMÕ¼¿Õ±È¼õÉÙ0.1%
                                  {
                                      tmr2_cnt = 0;
                                      tmr1_set_pwm_duty(--cur_pwm_duty);
                                  }
                              }
                              else
                              {
                                  white_light_close(); //
                                  // µ÷ÕûÍê³Éºó£¬Çå³ý±êÖ¾Î»
                                  light_control_flag = LIGHT_CONTROL_NONE;
                              }
                              break;
              
                          default:          // Ä¬ÈÏÊ²Ã´Ò²²»×ö
                              tmr2_cnt = 0; // Çå¿Õ´æ·Å¶¨Ê±Æ÷¼ÆÊýÖµµÄ±äÁ¿
                              break;
                          }
                      }
                      // if (tmr2_cnt >= 100)
                      // {
                      //     tmr2_cnt = 0;
              
                      //     if (light_on_off_status)
                      //     {
                      //         // Èç¹ûµÆ¹âÒÑ¾­¿ªÆô
                      //         if (cur_pwm_duty > 0)
                      //         {
                      //             tmr0_set_pwm_duty(cur_pwm_duty--);
                      //         }
                      //         else
                      //         {
C51 COMPILER V9.60.7.0   TMR2                                                              08/09/2024 15:55:04 PAGE 8   

                      //             tmr2_flag = 1; // ±íÊ¾ÒÑ¾­µ÷ÕûÍê³É
                      //         }
                      //     }
                      //     else
                      //     {
                      //         // Èç¹ûµÆ¹âÒÑ¾­¹Ø±Õ
                      //         if (cur_pwm_duty < 700)
                      //         {
                      //             tmr0_set_pwm_duty(cur_pwm_duty++);
                      //         }
                      //         else
                      //         {
                      //             tmr2_flag = 1; // ±íÊ¾ÒÑ¾­µ÷ÕûÍê³É
                      //         }
                      //     }
                      // }
              #endif
 440   2          }
 441   1      
 442   1          // ÍË³öÖÐ¶ÏÉèÖÃIP£¬²»¿ÉÉ¾³ý
 443   1          __IRQnIPnPop(TMR2_IRQn);
 444   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    347    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =      4    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
